- Access Control Migration
	- Revisit [[Jan 9th, 2023]]
	- V7 uses OPA
	- Access Control will still be the decision maker
		- But still passes information to OPA
		- Assumes Access Control is 100% accurate
		- Discrepancy logger if OPA and Access Control disagree
		- OPA = Open Policy Agent
			- Keep latency as low as possible
			- Can spin up new services if needed
	- v8 goal: Access Control is a dispatching service, OPA actually handles the authorization
	- https://backstage.iad.w10e.com/docs/default/component/eng-handbook/architecture/authorization/migrating-to-authz-v2/ruby-on-rails/
	- Can use some of the default configs for RBAC out of the gate, would need to change the model and app names
	- Rego file
		- Each `allow` is treated as an `or`
		- Each line within an `allow` is an `and`
		- Functions prefixed with an `_` won't get executed unless executed in an `allow``
		- Starting example
			- https://github.com/wealthsimple/opa-service/blob/main/wealthsimple/services/rails_sandbox_service/policy.rego
				- Can ditch the oauth line
			- Check out the rails sandbox as well for tests
	- TODO:
		- Upgrade Ares to Ruby 2.7.6, AMS is okay
		- Update README to run OPA when running Ares Server and AMS
		- Go through steps in upgrade guide
		- Upgrade CDS Service to 2.7.6